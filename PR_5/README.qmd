---
title: "Практика 005"
author: "Arikova Kristina"
date: "2024-11-05"
format:
  md:
    output-file: "README.md"
editor: "visual"
---

Исследование информации о состоянии беспроводных сетей.

## Цель

1.  Получить знания о методах исследования радиоэлектронной обстановки.

2.  Составить представление о механизмах работы Wi-Fi сетей на канальном и сетевом уровне модели OSI.

3.  Зекрепить практические навыки использования языка программирования R для\
    обработки данных.

4.  Закрепить знания основных функций обработки данных экосистемы tidyverseязыка R.

## Исходные данные

-   Компьютер

-   ОС Windows

-   Rstudio

-   Библиотека readr

-   Данные P2_wifi_data, собранные с помощью анализатора беспроводного трафика airodump-ng

-   Github

## Общий план выполнения

1.  Подготовка данных

2.  Анализ точек доступа

3.  Анализ данных клиентов

## Содержание ЛР

### Шаг 1. Подготовка данных

Импортированы данные о беспроводном трафике.

```{r}
Data <- read.csv('./P2_wifi_data.csv')
head(Data)
```

Формат CSV лога airodump-ng меняется внутри файла (имеет разное число столбцов). По сути, это два разных датасета:

-   датасет 1 – анонсы беспроводных точек доступа;

-   датасет 2 – запросы на подключение клиентов к известным им точкам доступа.
    \
    Разъеденим данные на два датасета.

```{r}
library(tidyverse)
library(readr)
```

```{r}
access_points <- read.csv('./P2_wifi_data.csv', nrows = 167)
head(access_points)

```

```{r}
client_requests <- read.csv('./P2_wifi_data.csv', skip = 169)
head(client_requests)
```

Приведены датасеты в вид “аккуратных данных”, преобразованы типы столбцов в соответствии с типом данных.

```{r}
access_points <- access_points %>% 
  mutate_at(vars(BSSID, Privacy, Cipher, Authentication, LAN.IP, ESSID), trimws) %>%
  mutate_at(vars(BSSID, Privacy, Cipher, Authentication, LAN.IP, ESSID), na_if, "")

access_points$First.time.seen <- as.POSIXct(access_points$First.time.seen, format = "%Y-%m-%d %H:%M:%S")
access_points$Last.time.seen <- as.POSIXct(access_points$Last.time.seen, format = "%Y-%m-%d %H:%M:%S")

client_requests <- client_requests %>% 
  mutate_at(vars(Station.MAC, BSSID, Probed.ESSIDs), trimws) %>%
  mutate_at(vars(Station.MAC, BSSID, Probed.ESSIDs), na_if, "")

client_requests$First.time.seen <- as.POSIXct(client_requests$First.time.seen, format = "%Y-%m-%d %H:%M:%S")
client_requests$Last.time.seen <- as.POSIXct(client_requests$Last.time.seen, format = "%Y-%m-%d %H:%M:%S")

```

Общая структура данных по датасетам:\

```{r}
glimpse(access_points)
```

```{r}
glimpse(client_requests)
```

### Шаг 2. Анализ точек доступа

Найдены небезопасные точки доступа.

```{r}
OpnPrivacy <- access_points %>% filter(Privacy == 'OPN') %>% select(BSSID)
OpnPrivacy = unique(OpnPrivacy)
head(OpnPrivacy)
```

Определены производители каждого обнаруженного устройства.

```{r}
fabricator <- sapply(OpnPrivacy, function(mac) substr(mac, 1, 8)) %>% unique()

fabricator
```

```         
E8:28:C1 - Eltex Enterprise Ltd.
00:25:00 - Apple, Inc.
E0:D9:E3 - Eltex Enterprise Ltd.
00:26:99 - Cisco Systems, Inc
00:03:7A - Taiyo Yuden Co., Ltd.
00:03:7F - Atheros Communications, Inc.
```

Остальные производители не были найдены с помощью интренет-ресурса [ouilookup.com](https://ouilookup.com/).

Выявлены устройства, использующие последнюю версию протокола шифрования WPA3, и названия точек доступа, реализованных на этих устройствах.

```{r}
access_points %>% filter(str_detect(access_points$Privacy, 'WPA3') == TRUE) %>% select(BSSID, ESSID)
```

Отсортированы точки доступа по интервалу времени в минутах, в течение которого они находились на связи, по убыванию.

```{r}
access_points %>% mutate(duration = as.numeric(difftime(Last.time.seen, First.time.seen, units = "mins"))) %>% arrange(desc(duration)) %>% select(BSSID, duration) %>% head(10)
```

\
Составлен топ-10 самых быстрых точек доступа.

```{r}
access_points %>% arrange(desc(Speed)) %>%  select(BSSID, Speed) %>% head(10)
```

Отсортированы точки доступа по частоте отправки запросов (beacons) в единицу времени по их убыванию.

```{r}

```

### Шаг 3. Анализ данных клиентов

Обределены прозводители каждого обраруженного устройства.

```{r}

```

Обнаружены устройства, которые НЕ рандомизируют свой MAC адрес.

```{r}

```

Кластеризованы запросы от устройств к точкам доступа по их именам.

```{r}

```

\
Время появления устройства в зоне радиовидимости и время выхода его из нее.

```{r}

```

Определена стабильность уровня сигнала внури кластера во времени. Выявлен наиболее стабильный кластер.

```{r}

```

## Оценка результата

1.  Получены практические навыки использования языка программирования R для обработки данных
2.  Закреплены знания базовых типов данных языка R
3.  Получены практические навыки использования функций обработки данных пакета dplyr
4.  Закреплены знания основных функций обработки данных экосистемы tidyverseязыка R

## Вывод

В результате выполнения работы были закреплены умения работы с основными инструментами обработки данных на языке R.
